---
// Disable prerendering for this page
export const prerender = false;
---

<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Yearbook Content Manager</title>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script is:inline>
    // Prevent auto-init
    window.CMS_MANUAL_INIT = true;
  </script>
  <script is:inline>
    const config = {
      backend: {
        name: 'github',
        repo: 'simpscar/yearbook.simpsonscarborough.com',
        branch: 'main'
      },
      media_folder: 'public/images',
      public_folder: '/images',
      collections: [
        {
          name: 'yearbook',
          label: 'Yearbook Content',
          files: [
            {
              name: 'letter',
              label: 'CEO Letter',
              file: 'src/data/index.yaml',
              fields: [
                {
                  label: 'Letter',
                  name: 'letter',
                  widget: 'object',
                  fields: [
                    { label: 'Heading', name: 'heading', widget: 'string' },
                    { label: 'Show Quote Marks', name: 'quoteMarks', widget: 'boolean', default: false },
                    {
                      label: 'Quotes',
                      name: 'quotes',
                      widget: 'list',
                      fields: [
                        { label: 'Text', name: 'text', widget: 'markdown' },
                        { label: 'Citation', name: 'cite', widget: 'text' }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              name: 'freshmen',
              label: 'Class of 2024',
              file: 'src/data/index.yaml',
              fields: [
                {
                  label: 'Freshmen',
                  name: 'freshmen',
                  widget: 'object',
                  fields: [
                    { label: 'Heading', name: 'heading', widget: 'string' },
                    {
                      label: 'Sections',
                      name: 'sections',
                      widget: 'list',
                      fields: [
                        { label: 'Section Heading', name: 'heading', widget: 'string' },
                        {
                          label: 'Cards',
                          name: 'cards',
                          widget: 'list',
                          fields: [
                            { label: 'Text', name: 'text', widget: 'text' },
                            {
                              label: 'Image',
                              name: 'image',
                              widget: 'object',
                              fields: [
                                { label: 'Image', name: 'src', widget: 'image' }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              name: 'seniors',
              label: 'Super Seniors',
              file: 'src/data/index.yaml',
              fields: [
                {
                  label: 'Seniors',
                  name: 'seniors',
                  widget: 'object',
                  fields: [
                    { label: 'Heading', name: 'heading', widget: 'string' },
                    {
                      label: 'Sections',
                      name: 'sections',
                      widget: 'list',
                      fields: [
                        { label: 'Section Heading', name: 'heading', widget: 'string' },
                        {
                          label: 'Cards',
                          name: 'cards',
                          widget: 'list',
                          fields: [
                            { label: 'Text', name: 'text', widget: 'text' },
                            {
                              label: 'Image',
                              name: 'image',
                              widget: 'object',
                              fields: [
                                { label: 'Image', name: 'src', widget: 'image' }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              name: 'quotes',
              label: 'Quotes',
              file: 'src/data/index.yaml',
              fields: [
                {
                  label: 'Quotes',
                  name: 'quotes',
                  widget: 'list',
                  fields: [
                    { label: 'Quote', name: 'text', widget: 'text' },
                    { label: 'Name', name: 'name', widget: 'string' },
                    { label: 'Title', name: 'title', widget: 'string' }
                  ]
                }
              ]
            },
            {
              name: 'moments',
              label: 'Moments',
              file: 'src/data/index.yaml',
              fields: [
                {
                  label: 'Moments',
                  name: 'moments',
                  widget: 'list',
                  fields: [
                    { 
                      label: 'Date', 
                      name: 'date', 
                      widget: 'datetime', 
                      format: 'YYYY-MM-DD',
                      date_format: 'YYYY-MM-DD',
                      time_format: false
                    },
                    { label: 'Heading', name: 'heading', widget: 'text' }
                  ]
                }
              ]
            },
            {
              name: 'testimonials',
              label: 'Testimonials',
              file: 'src/data/index.yaml',
              fields: [
                {
                  label: 'Testimonials',
                  name: 'testimonials',
                  widget: 'object',
                  fields: [
                    { 
                      label: 'Color Scheme', 
                      name: 'scheme', 
                      widget: 'select', 
                      options: ['light', 'dark'] 
                    },
                    { label: 'Heading', name: 'heading', widget: 'string' },
                    {
                      label: 'Quotes',
                      name: 'quotes',
                      widget: 'list',
                      fields: [
                        { label: 'Quote', name: 'text', widget: 'markdown' },
                        { label: 'Citation', name: 'cite', widget: 'string' }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    };
    
    // Wait for CMS to load
    if (window.CMS) {
      window.CMS.init({ config });
    } else {
      window.addEventListener('load', () => {
        if (window.CMS) {
          window.CMS.init({ config });
        }
      });
    }
  </script>
</body>
</html>
